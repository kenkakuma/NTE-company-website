import{n as y,d as o,v as I,G as k,a2 as _,M as s,O as m,P as b,T as E,u as n,Z as V,a3 as L,N as i}from"./BnK3X0rM.js";import{V as M}from"./Bz9mJNPo.js";import{V as z}from"./DXXy8Kh-.js";import{_ as C}from"./DlAUqK2U.js";import"./D55FdVBa.js";import"./BvG75Wey.js";const B={key:0,class:"image-placeholder"},N={key:1,class:"image-error"},S=["src","alt"],D=y({__name:"DeferredImage",props:{src:{},alt:{default:"Image"},width:{default:"100%"},height:{default:"auto"},placeholder:{default:""},rootMargin:{default:"50px"},threshold:{default:.1},onError:{},onLoad:{}},emits:["load","error"],setup(f,{emit:g}){const a=f,h=g,l=o(),u=o(!1),d=o(!1),t=o(!1),c=o("");I(u,e=>{e&&!d.value&&!t.value&&(c.value=a.src)});const p=()=>{var e;d.value=!0,h("load"),(e=a.onLoad)==null||e.call(a)},v=()=>{var e;t.value=!0,h("error"),(e=a.onError)==null||e.call(a)};return k(()=>{if(!l.value)return;a.placeholder&&(c.value=a.placeholder);const e=new IntersectionObserver(r=>{r.forEach(w=>{w.isIntersecting&&(u.value=!0,e.disconnect())})},{rootMargin:a.rootMargin,threshold:a.threshold});e.observe(l.value),_(()=>{e.disconnect()})}),(e,r)=>(i(),s("div",{ref_key:"imageContainer",ref:l,class:"lazy-image-container"},[m(E,{name:"fade",mode:"out-in"},{default:b(()=>[!n(d)&&!n(t)?(i(),s("div",B,[m(M,{type:"image",height:e.height,width:e.width,class:"mx-auto"},null,8,["height","width"])])):n(t)?(i(),s("div",N,[m(z,{icon:"mdi-image-broken",size:"large",color:"grey"}),r[0]||(r[0]=V("p",{class:"text-caption mt-2"},"画像を読み込めませんでした",-1))])):(i(),s("img",{key:2,src:n(c),alt:e.alt,style:L({width:typeof e.width=="string"?e.width:`${e.width}px`,height:typeof e.height=="string"?e.height:`${e.height}px`}),class:"lazy-image",onLoad:p,onError:v},null,44,S))]),_:1})],512))}}),Z=C(D,[["__scopeId","data-v-7b51b4be"]]);export{Z as default};
